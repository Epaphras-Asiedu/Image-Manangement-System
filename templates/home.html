{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='frontend/home.css') }}">

<div class="home-container">
    <h2 class="home-title">ðŸ“¸ Welcome to the Image Gallery App</h2>

    {% if session.get('user_id') %}
        <p class="welcome-msg">
            Hello, <b>{{ session.get('username') }}</b>!  
            <a class="upload-link" href="{{ url_for('images.upload_form') }}">Upload a new image</a>
        </p>
    {% else %}
        <p class="welcome-msg">
            Welcome! Discover beautiful images from our community below.<br>
            Please <a class="auth-link" href="{{ url_for('auth.login') }}">login</a> or <a class="auth-link" href="{{ url_for('auth.register') }}">register</a> to upload your own images.
        </p>
        <div id="slideshow-container">
            <div class="slideshow-images">
                {% for img in images %}
                    <img class="slide-img" src="{{ url_for('static', filename='uploads/' ~ img.filename) }}" alt="{{ img.title }}" style="display:none; width:200px; height:120px; object-fit:cover; margin:0 10px; border-radius:10px;">
                {% endfor %}
            </div>
        </div>
        <script>
        // Simple JS slideshow
        let slideIndex = 0;
        function showSlides() {
            let slides = document.getElementsByClassName("slide-img");
            for (let i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slideIndex++;
            if (slideIndex > slides.length) {slideIndex = 1}
            if (slides.length > 0) slides[slideIndex-1].style.display = "block";
            setTimeout(showSlides, 2000); // Change image every 2 seconds
        }
        showSlides();
        </script>
    {% endif %}
</div>
{% endblock %}
